<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="author" content="@zhengli" />
        <title>jsinst - Test Cases</title>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/qunit/qunit-1.11.0.css" />
        <link rel="stylesheet" type="text/css" href="./css/main.css" />
    </head>
    <body class="p-testcases">
        <div class="wrapper">
            <header>
                <h1 class="logo jsinst" data-feature="logo" data-value="click">jsinst</h1>
            </header>
            <section class="content">
                <div id="qunit"></div>
                <div id="qunit-fixture"></div>
            </section>
            <footer><p>jsinst 0.0.1, the MIT License, <a href="http://about.me/nocoo">@zhengli</a>, <a href="https://github.com/nocoo/jsinst">Github</a></p></footer>
        </div>

        <script id="seajsnode" src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>
        <script id="seajsnode" src="./js/sea.min.js"></script>
        <script>
            (function () {
                'use strict';
                /*global seajs*/
                seajs.use([ './js/jsinst' ], function (jsinst) {
                    module('Core');
                    test('timestamp', function() {
                        ok(jsinst.timestamp() > 0, 'Passed');
                    });

                    asyncTest('timestamp', function() {
                        var ts1 = jsinst.timestamp(), sleep = parseInt(Math.random() * 1000);
                        setTimeout(function() {
                            var ts2 = jsinst.timestamp();
                            ok(ts2 >= ts1 + sleep, 'Passed');
                            start();
                        }, sleep);
                    });

                    module('Callback');
                    asyncTest('event queue', function() {
                        var evt = { 'a': 1, 'b': '2' };
                        jsinst.register('queue', function(data) {
                            equal(data, evt, 'Passed');
                            start();
                        }, this);

                        jsinst.queue(evt);
                    });
                });
            }());
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-40618976-1', 'jsinst.com'); ga('send', 'pageview');
        </script>
    </body>
</html>
